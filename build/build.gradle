apply plugin : 'java'

defaultTasks 'dev'

ext {

    source_dir = "./../source/"
    output_dir = "./output"
    classes_dir = output_dir + "/classes/"
}


apply from: 'gradle/ant-wrapper.gradle'


task dev (dependsOn: ['common']) << {
    println 'Build completed !'
    println 'Check out the Exceptions-1.0.jar under ./output directory'
}

task common (dependsOn: ['removeOldOutputs', 'compile', 'makeJar']) << {
}


task removeOldOutputs << {
    file(output_dir).deleteDir()
    println 'Removing old output completed'
}


task compile << {

    antJavac(
            srcdir: source_dir,
            destdir: classes_dir
    )

    println 'compile completed'

}

compile.mustRunAfter removeOldOutputs

task makeJar << {
    antJar(
            basedir: classes_dir,
            destfile: output_dir + "/Exceptions-1.0.jar",
    )

    println 'jar creation completed'
}

makeJar.mustRunAfter compile
